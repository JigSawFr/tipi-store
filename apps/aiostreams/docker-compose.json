{
    "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
    "schemaVersion": 2,
    "services": [
        {
            "name": "aiostreams",
            "image": "ghcr.io/viren070/aiostreams:v2.21.4",
            "internalPort": 3000,
            "isMain": true,
            "environment": [
                {
                    "key": "PORT",
                    "value": "3000"
                },
                {
                    "key": "ADDON_NAME",
                    "value": "AIOStreams"
                },
                {
                    "key": "ADDON_ID",
                    "value": "aiostreams.tipi"
                },
                {
                    "key": "BASE_URL",
                    "value": "${APP_PROTOCOL}://${APP_DOMAIN}"
                },
                {
                    "key": "SECRET_KEY",
                    "value": "${AIOSTREAMS_SECRET_KEY}"
                },
                {
                    "key": "ADDON_PASSWORD",
                    "value": "${AIOSTREAMS_ADDON_PASSWORD}"
                },
                {
                    "key": "DATABASE_URI",
                    "value": "sqlite://./data/db.sqlite"
                },
                {
                    "key": "TMDB_ACCESS_TOKEN",
                    "value": "${AIOSTREAMS_TMDB_ACCESS_TOKEN}"
                },
                {
                    "key": "TRUSTED_UUIDS",
                    "value": "${AIOSTREAMS_TRUSTED_UUIDS}"
                },
                {
                    "key": "TZ",
                    "value": "${TZ}"
                }
            ],
            "volumes": [
                {
                    "hostPath": "${APP_DATA_DIR}/data",
                    "containerPath": "/app/data"
                }
            ],
            "healthCheck": {
                "test": "wget -qO- http://localhost:3000/api/v1/status || exit 1",
                "interval": "1m",
                "timeout": "10s",
                "retries": 5,
                "startPeriod": "10s"
            }
        }
    ]
}